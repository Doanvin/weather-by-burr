{"version":3,"sources":["weather.js"],"names":["document","getElementsByClassName","addEventListener","event","preventDefault","keyCode","click","getJson","url","callback","xhr","XMLHttpRequest","onreadystatechange","readyState","status","responseText","open","send","setWeatherUrl","queryText","undefined","replace","startUrl","endUrl","getWeatherItem","search_query","parseWeatherItem","o","json","JSON","parse","results","query","channel","city","location","state","region","country","current","item","condition","forecasts","forecast","setWeatherCurrent","setWeatherForecast","innerHTML","imgSrc","setImgSrc","code","temp","text","numForecasts","length","forecastHtml","i","day","high","low","forecastClass","forecastClearfix","forecastTitle","classList","contains","remove","forecastDiv","weatherCodes","yahooWeather","getZipCode","zip_code","e","getWeatherByIp","setIframeSrc","iframeSrcs","iframes","getElementsByTagName","src","windowLoad","window","setTimeout"],"mappings":"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","file":"bundle.js","sourcesContent":["// Creates event listener on search input. Pressing enter clicks search.\n(document.getElementsByClassName('search__input')[0]\n    .addEventListener('keyup', (event) => {\n        event.preventDefault();\n        if (event.keyCode == 13) {\n            document.getElementsByClassName('search__button')[0].click();\n        }\n    })\n);\n\nfunction getJson(url, callback) {\n    // Makes requests to an api that returns json\n    const xhr = new XMLHttpRequest();\n    xhr.onreadystatechange = () => {\n        if (xhr.readyState == 4 && xhr.status == 200)\n            callback(xhr.responseText);\n        else callback({});\n    };\n    xhr.open('GET', url, true); // true for asynchronous\n    xhr.send(null);\n}\n\nfunction setWeatherUrl(queryText) {\n    // queryText is value of search input box; Reno, Nv if undefined\n    if (queryText===undefined || queryText==''){queryText = 'Reno, Nv';}\n    queryText = queryText.replace(/,/, '%2C').replace(/ /, '%20');\n    // Format url\n    const startUrl = 'https://query.yahooapis.com/v1/public/yql?q=select%20location%2C%20item%20from%20weather.forecast%20where%20woeid%20in%20(select%20woeid%20from%20geo.places(1)%20where%20text%3D%22';\n    const endUrl = '%22)&format=json&env=store%3A%2F%2Fdatatables.org%2Falltableswithkeys';\n    let url = startUrl + queryText + endUrl;\n    url = url.replace(/\"/, '');\n    return url;\n}\n\n/* exported getWeatherItem */\nfunction getWeatherItem(search_query) {\n    const url = setWeatherUrl(search_query);\n    // Makes async GET request using parseWeatherItem() as a callback.\n    getJson(url, parseWeatherItem);\n}\n\n/* exported parseWeatherItem */\nfunction parseWeatherItem (o) {\n    // Parses returned GET response, o, and extracts\n    // the title, links, and text of each news story.\n    const json = JSON.parse(o);\n    const results = json.query.results.channel;\n    const city = results.location.city;\n    const state = results.location.region;\n    const country = results.location.country;\n    const current = results.item.condition;\n    const forecasts = results.item.forecast;\n    setWeatherCurrent(city, state, country, current);\n    setWeatherForecast(forecasts);\n}\n\nfunction setWeatherCurrent (city, state, country, current) {\n    // Takes parsed weather info and creates a div to be placed in the\n    // .weatherCurrent div. All variables passed in should be strings.\n    let location = document.getElementsByClassName('weather__location')[0];\n    location.innerHTML = city + ', ' + state;\n\n    let imgSrc = setImgSrc(current.code);\n\n    let condition = document.getElementsByClassName('weather__condition')[0];\n    condition.innerHTML = '<img height=\"150px\" width=\"150px\" src=\"assets/img/weather/'\n    + imgSrc + '.png\" /><br/>' + 'It\\'s ' + current.temp + ' &#8457 And ' + current.text;\n}\n\nfunction setWeatherForecast (forecasts) {\n    // Takes parsed weather info and creates a div to be placed in the\n    // .weather__forecast div. forecasts is an array of objects.\n    const numForecasts = forecasts.length;\n    let forecastHtml = '';\n    for (let i = 0; i < numForecasts; i++) {\n        const day = forecasts[i].day;\n        const high = forecasts[i].high;\n        const low = forecasts[i].low;\n        const text = forecasts[i].text;\n        const imgSrc = setImgSrc(forecasts[i].code);\n        let forecastClass = '';\n        let forecastClearfix = '';\n        // Fixes Bug #1 | sets clearfixes\n        if (i%2==1 && i!==3 && i!==7) {\n            forecastClearfix = '<div class=\"clearfix visible-xs-block\"></div>';\n        } else if (i==3||i==7) {\n            forecastClearfix = '<div class=\"clearfix visible-xs-block visible-sm-block\"></div>';\n        }\n        // Set responsive classes\n        if ((i == 0) || (i == 5)) {\n            forecastClass = 'col-md-offset-1 ';\n        } else if ((i == 4)) {\n            forecastClearfix = '<div class=\"clearfix visible-md-block visible-lg-block\"></div>';\n        } else if ((i == 8)) {\n            forecastClass = 'col-sm-offset-3 col-md-offset-0 col-lg-offset-0 ';\n        }\n        forecastHtml += '<div class=\"weather__forecast-item ' + forecastClass +\n        'col-xs-6 col-sm-3 col-md-2\"><div class=\"col-xs-12\"><h3>' + day +\n        '</h3></div><div class=\"col-xs-6\"><p>' + high + ' &#8457</p><p>' + low +\n        ' &#8457</p></div><div class=\"col-xs-6\"><img class=\"img-responsive\" src=\"assets/img/weather/'\n        + imgSrc + '.png\" /></div><div class=\"col-xs-12\"><p>' + text + '</p></div></div>' + forecastClearfix;\n    }\n\n    // Add hidden class to hide padding weather__forecast-title div\n    const forecastTitle = document.getElementsByClassName('weather__forecast-title')[0];\n    if (forecastTitle.classList.contains('hidden')) {\n        forecastTitle.classList.remove('hidden');\n    }\n\n    // Insert forecastDiv into the html page\n    let forecastDiv = document.getElementsByClassName('weather__forecast-boxes')[0];\n    forecastDiv.innerHTML = forecastHtml;\n}\n\nfunction setImgSrc(code) {\n    // Takes interger code from yahoo weather (0-47) and returns text to be used\n    // for img src.  https://developer.yahoo.com/weather/documentation.html#codes\n    const weatherCodes = ['Sunny', 'Cloudy', 'MostlyCloudy', 'CloudyNight',\n        'Thunderstorms', 'ThunderstormsNight', 'Drizzle', 'DrizzleNight',\n        'SlightDrizzle', 'Haze', 'Moon', 'Snow'];\n    const yahooWeather =\n        [\n            weatherCodes[5],// 0\n            weatherCodes[5],\n            weatherCodes[5],\n            weatherCodes[5],\n            weatherCodes[5],\n            weatherCodes[11],// 5\n            weatherCodes[6],\n            weatherCodes[11],\n            weatherCodes[6],\n            weatherCodes[6],\n            weatherCodes[6],// 10\n            weatherCodes[8],\n            weatherCodes[6],\n            weatherCodes[11],\n            weatherCodes[11],\n            weatherCodes[11],// 15\n            weatherCodes[11],\n            weatherCodes[7],\n            weatherCodes[7],\n            weatherCodes[0],\n            weatherCodes[9],// 20\n            weatherCodes[9],\n            weatherCodes[9],\n            weatherCodes[9],\n            weatherCodes[9],\n            weatherCodes[1],// 25\n            weatherCodes[1],\n            weatherCodes[3],\n            weatherCodes[2],\n            weatherCodes[3],\n            weatherCodes[2],// 30\n            weatherCodes[10],\n            weatherCodes[0],\n            weatherCodes[10],\n            weatherCodes[2],\n            weatherCodes[7],// 35\n            weatherCodes[0],\n            weatherCodes[4],\n            weatherCodes[4],\n            weatherCodes[8],\n            weatherCodes[8],// 40\n            weatherCodes[11],\n            weatherCodes[11],\n            weatherCodes[11],\n            weatherCodes[11],\n            weatherCodes[4],// 45\n            weatherCodes[11],\n            weatherCodes[4]\n        ];\n    return yahooWeather[code];\n\n}\n\nfunction getZipCode(json) {\n    // Parses response from request and returns zip code\n\n    try {\n        const o = JSON.parse(json);\n        getWeatherItem(o.zip_code);\n    }\n    catch (e) {\n        getWeatherItem('89503');\n    }\n}\n\n/* exported getWeatherByIp */\nfunction getWeatherByIp() {\n    const url = 'https://freegeoip.net/json/';\n    // Makes async GET request using getCityState() as a callback.\n    getJson(url, getZipCode);\n}\n\nfunction setIframeSrc() {\n    // Sets the src attribute of YouTube iframes after the page has loaded\n    const iframeSrcs = ['https://www.youtube.com/embed/S9ZSzuj1UpA',\n        'https://www.youtube.com/embed/FR7YnNM6IXA?list=RDFR7YnNM6IXA',\n        'https://www.youtube.com/embed/8fo4STfDlZk?list=PLJMuYl1_E0hehY29rF1_p1UAOaxo_1S49',\n        'https://www.youtube.com/embed/x9iYvyffAh4?list=RDGAlU9nVnFx8'];\n    const iframes = document.getElementsByTagName('iframe');\n    for (let i=0; i<iframes.length; i+=1) {\n        iframes[i].src =  iframeSrcs[i];\n    }\n}\n/* exported windowLoad */\nfunction windowLoad(){\n    getWeatherByIp();\n    window.setTimeout(setIframeSrc, 1000);\n}\n"]}